import subprocess
import os
import time

js_file = '/home/ubuntu/rce-via-tagname/poc.js'
target_dir = '/home/ubuntu/rce-via-tagname'
target_filename = 'HACKED'

# Run the JavaScript file & ignore errors
try:
    subprocess.run(['node', js_file], check=True, stderr=subprocess.PIPE, stdout=subprocess.PIPE)
except subprocess.CalledProcessError:
    pass
              
# Wait for a short time to ensure the file has time to be created
time.sleep(1)

# Check if the file exists in the target directory
target_path = os.path.join(target_dir, target_filename)
if os.path.isfile(target_path):
    print(f"Success - File '{target_filename}' was created in {target_dir}.")
else:
    print(f"Failure - File '{target_filename}' not found in {target_dir}.")